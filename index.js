const  data = [
  {
      "category": "General Knowledge",
      "questions": [
          {
              "question": "What is the capital of France?",
              "options": ["London", "Berlin", "Paris", "Madrid"],
              "answer": "Paris"
          },
          {
              "question": "Who wrote 'To Kill a Mockingbird'?",
              "options": ["Harper Lee", "J.K. Rowling", "Ernest Hemingway", "Mark Twain"],
              "answer": "Harper Lee"
          },
          {
              "question": "What is the tallest mountain in the world?",
              "options": ["K2", "Mount Everest", "Kangchenjunga", "Lhotse"],
              "answer": "Mount Everest"
          },
          {
              "question": "Which country is known as the Land of the Rising Sun?",
              "options": ["China", "Japan", "South Korea", "Thailand"],
              "answer": "Japan"
          },
          {
              "question": "Who painted the Mona Lisa?",
              "options": ["Vincent van Gogh", "Pablo Picasso", "Leonardo da Vinci", "Claude Monet"],
              "answer": "Leonardo da Vinci"
          }
      ]
  },
  {
      "category": "Science",
      "questions": [
          {
              "question": "What is the chemical symbol for water?",
              "options": ["O2", "H2O", "CO2", "H2"],
              "answer": "H2O"
          },
          {
              "question": "What planet is known as the Red Planet?",
              "options": ["Earth", "Mars", "Jupiter", "Saturn"],
              "answer": "Mars"
          },
          {
              "question": "What is the speed of light?",
              "options": ["300,000 km/s", "150,000 km/s", "200,000 km/s", "250,000 km/s"],
              "answer": "300,000 km/s"
          },
          {
              "question": "What is the powerhouse of the cell?",
              "options": ["Nucleus", "Mitochondria", "Ribosome", "Chloroplast"],
              "answer": "Mitochondria"
          },
          {
              "question": "What is the hardest natural substance on Earth?",
              "options": ["Gold", "Iron", "Diamond", "Platinum"],
              "answer": "Diamond"
          }
      ]
  },
  {
      "category": "History",
      "questions": [
          {
              "question": "Who was the first President of the United States?",
              "options": ["Abraham Lincoln", "George Washington", "Thomas Jefferson", "John Adams"],
              "answer": "George Washington"
          },
          {
              "question": "What year did World War II end?",
              "options": ["1941", "1945", "1950", "1960"],
              "answer": "1945"
          },
          {
              "question": "Who discovered America?",
              "options": ["Christopher Columbus", "Ferdinand Magellan", "Leif Erikson", "Marco Polo"],
              "answer": "Christopher Columbus"
          },
          {
              "question": "What ancient civilization built the pyramids?",
              "options": ["Romans", "Greeks", "Egyptians", "Mesopotamians"],
              "answer": "Egyptians"
          },
          {
              "question": "Who was the first woman to fly solo across the Atlantic Ocean?",
              "options": ["Harriet Quimby", "Amelia Earhart", "Bessie Coleman", "Jacqueline Cochran"],
              "answer": "Amelia Earhart"
          }
      ]
  },
  {
      "category": "Geography",
      "questions": [
          {
              "question": "Which is the largest ocean on Earth?",
              "options": ["Atlantic Ocean", "Indian Ocean", "Arctic Ocean", "Pacific Ocean"],
              "answer": "Pacific Ocean"
          },
          {
              "question": "Which country has the largest population?",
              "options": ["India", "United States", "China", "Russia"],
              "answer": "China"
          },
          {
              "question": "What is the longest river in the world?",
              "options": ["Amazon River", "Nile River", "Yangtze River", "Mississippi River"],
              "answer": "Nile River"
          },
          {
              "question": "What is the capital city of Australia?",
              "options": ["Sydney", "Melbourne", "Canberra", "Brisbane"],
              "answer": "Canberra"
          },
          {
              "question": "Which desert is the largest in the world?",
              "options": ["Sahara", "Gobi", "Kalahari", "Arctic"],
              "answer": "Sahara"
          }
      ]
  },
  {
      "category": "Entertainment",
      "questions": [
          {
              "question": "Who played Jack in the movie 'Titanic'?",
              "options": ["Brad Pitt", "Tom Cruise", "Leonardo DiCaprio", "Johnny Depp"],
              "answer": "Leonardo DiCaprio"
          },
          {
              "question": "Which TV show features a character named Sheldon Cooper?",
              "options": ["Friends", "How I Met Your Mother", "The Big Bang Theory", "Seinfeld"],
              "answer": "The Big Bang Theory"
          },
          {
              "question": "Who directed 'Inception'?",
              "options": ["Steven Spielberg", "Christopher Nolan", "James Cameron", "Quentin Tarantino"],
              "answer": "Christopher Nolan"
          },
          {
              "question": "Which singer is known as the 'Queen of Pop'?",
              "options": ["Beyoncé", "Madonna", "Lady Gaga", "Britney Spears"],
              "answer": "Madonna"
          },
          {
              "question": "Which film won the Academy Award for Best Picture in 2020?",
              "options": ["1917", "Joker", "Parasite", "Once Upon a Time in Hollywood"],
              "answer": "Parasite"
          }
      ]
  },
  {
      "category": "Literature",
      "questions": [
          {
              "question": "Who wrote '1984'?",
              "options": ["George Orwell", "Aldous Huxley", "Ray Bradbury", "J.R.R. Tolkien"],
              "answer": "George Orwell"
          },
          {
              "question": "What is the name of the wizarding school in 'Harry Potter'?",
              "options": ["Hogwarts", "Beauxbatons", "Durmstrang", "Ilvermorny"],
              "answer": "Hogwarts"
          },
          {
              "question": "Who wrote 'Pride and Prejudice'?",
              "options": ["Jane Austen", "Emily Brontë", "Charlotte Brontë", "Mary Shelley"],
              "answer": "Jane Austen"
          },
          {
              "question": "Which novel begins with the line 'Call me Ishmael'?",
              "options": ["Moby Dick", "The Great Gatsby", "1984", "To Kill a Mockingbird"],
              "answer": "Moby Dick"
          },
          {
              "question": "Who is the author of 'The Catcher in the Rye'?",
              "options": ["J.D. Salinger", "F. Scott Fitzgerald", "Ernest Hemingway", "John Steinbeck"],
              "answer": "J.D. Salinger"
          }
      ]
  },
  {
      "category": "Sports",
      "questions": [
          {
              "question": "Which country won the FIFA World Cup in 2018?",
              "options": ["Brazil", "Germany", "France", "Argentina"],
              "answer": "France"
          },
          {
              "question": "In which sport would you perform a slam dunk?",
              "options": ["Football", "Basketball", "Tennis", "Baseball"],
              "answer": "Basketball"
          },
          {
              "question": "Which tennis player has won the most Grand Slam titles?",
              "options": ["Roger Federer", "Rafael Nadal", "Novak Djokovic", "Pete Sampras"],
              "answer": "Roger Federer"
          },
          {
              "question": "Which country hosts the Tour de France?",
              "options": ["Spain", "Italy", "France", "Belgium"],
              "answer": "France"
          },
          {
              "question": "Which sport is known as the 'king of sports'?",
              "options": ["Football", "Cricket", "Basketball", "Tennis"],
              "answer": "Football"
          }
      ]
  },
  {
      "category": "Music",
      "questions": [
          {
              "question": "Who is known as the 'King of Pop'?",
              "options": ["Elvis Presley", "Michael Jackson", "Prince", "Justin Bieber"],
              "answer": "Michael Jackson"
          },
          {
              "question": "Which band released the album 'Abbey Road'?",
              "options": ["The Rolling Stones", "The Beatles", "Led Zeppelin", "The Who"],
              "answer": "The Beatles"
          },
          {
              "question": "Who is the lead singer of the band U2?",
              "options": ["Bono", "Edge", "Larry", "Adam"],
              "answer": "Bono"
          },
          {
              "question": "Which female artist released the album 'Lemonade'?",
              "options": ["Rihanna", "Adele", "Beyoncé", "Taylor Swift"],
              "answer": "Beyoncé"
          },
          {
              "question": "Which classical composer wrote 'The Four Seasons'?",
              "options": ["Beethoven", "Mozart", "Vivaldi", "Bach"],
              "answer": "Vivaldi"
          }
      ]
  },
  {
      "category": "Technology",
      "questions": [
          {
              "question": "Who is the founder of Microsoft?",
              "options": ["Steve Jobs", "Elon Musk", "Bill Gates", "Mark Zuckerberg"],
              "answer": "Bill Gates"
          },
          {
              "question": "What does HTTP stand for?",
              "options": ["HyperText Transfer Protocol", "HyperText Transmission Protocol", "HyperText Transfer Procedure", "HyperText Transmission Procedure"],
              "answer": "HyperText Transfer Protocol"
          },
          {
              "question": "Which company developed the iPhone?",
              "options": ["Google", "Microsoft", "Apple", "Samsung"],
              "answer": "Apple"
          },
          {
              "question": "What does CPU stand for?",
              "options": ["Central Processing Unit", "Central Performance Unit", "Central Power Unit", "Central Processor Unit"],
              "answer": "Central Processing Unit"
          },
          {
              "question": "Who is known as the father of computers?",
              "options": ["Alan Turing", "Charles Babbage", "John von Neumann", "Bill Gates"],
              "answer": "Charles Babbage"
          }
      ]
  },
  {
      "category": "Movies",
      "questions": [
          {
              "question": "Which movie won the first Academy Award for Best Picture?",
              "options": ["Gone with the Wind", "The Jazz Singer", "Wings", "Sunrise"],
              "answer": "Wings"
          },
          {
              "question": "Who played the character of Forrest Gump in the movie?",
              "options": ["Tom Hanks", "Brad Pitt", "Johnny Depp", "Matt Damon"],
              "answer": "Tom Hanks"
          },
          {
              "question": "Which movie is famous for the quote 'I'll be back'?",
              "options": ["The Terminator", "Predator", "Commando", "Total Recall"],
              "answer": "The Terminator"
          },
          {
              "question": "Who directed 'Pulp Fiction'?",
              "options": ["Quentin Tarantino", "Steven Spielberg", "Martin Scorsese", "James Cameron"],
              "answer": "Quentin Tarantino"
          },
          {
              "question": "What is the name of the fictional African country in 'Black Panther'?",
              "options": ["Wakanda", "Zamunda", "Genovia", "Latveria"],
              "answer": "Wakanda"
          }
      ]
  }
]



let categoryArray = ["General Knowledge", "Science", "History", "Geography", "Entertainment", "Literature", "Sports", "Music", "Technology", "Movies"];

function randomCategorySelector(arr, arrayLength) {
  let random = Math.floor(Math.random() * arrayLength);
  return arr[random];
}

function askQuestionBasedOnRandomCategory(data) {
  let randomCategory = randomCategorySelector(categoryArray, categoryArray.length);
  let filteredData = data.filter(element => element.category == randomCategory);
  return filteredData;
}

let randomQuestion = askQuestionBasedOnRandomCategory(data);
let randomPickedQuestion;

function generateQuestion(arr) {
  let question = arr[0].questions;
  let randomQuestionPick = randomCategorySelector(question, question.length);


  let questionElement = document.getElementsByClassName("question");
  let allOptions = document.querySelectorAll(".options p");

  allOptions.forEach((item, index) => {
    item.textContent = randomQuestionPick.options[index];
  });

  for (let i = 0; i < questionElement.length; i++) {
    questionElement[i].textContent = randomQuestionPick.question;
  }

  return randomQuestionPick;
}

randomPickedQuestion = generateQuestion(randomQuestion);

let pTags = document.querySelectorAll('.options p');
let defaultColor = '#ffffff';

function resetColor() {
  pTags.forEach(options => {
    options.style.backgroundColor = defaultColor;
  });
}

function attachEventListeners() {
  return Array.from(pTags).map(options => {
    return new Promise((resolve, reject) => {
      options.addEventListener('click', () => {
        let getSelectedValue = options.textContent;
        if (getSelectedValue == randomPickedQuestion.answer) {
          options.style.backgroundColor = '#8BC34A';
          resolve("win");
        } else {
          options.style.backgroundColor = '#F08080';
          reject("loose");
        }
      });
    });
  });
}

function handleNextQuestion() {
  randomPickedQuestion = generateQuestion(randomQuestion);
  resetColor();
  pTags = document.querySelectorAll('.options p'); 
  let finalValue = attachEventListeners();

  Promise.all(finalValue).then((results) => {
    if (results.includes('win')) {
   
    } 
  }).catch((err) => {
  
  });
}

let nextBtn = document.querySelector('.next');
nextBtn.addEventListener('click', () => {
  handleNextQuestion();
});


handleNextQuestion();
